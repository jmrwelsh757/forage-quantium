<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Business Intelligence Report</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="quantium_task2_files/libs/clipboard/clipboard.min.js"></script>
<script src="quantium_task2_files/libs/quarto-html/quarto.js"></script>
<script src="quantium_task2_files/libs/quarto-html/popper.min.js"></script>
<script src="quantium_task2_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="quantium_task2_files/libs/quarto-html/anchor.min.js"></script>
<link href="quantium_task2_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="quantium_task2_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="quantium_task2_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="quantium_task2_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="quantium_task2_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Business Intelligence Report</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>I was asked us to evaluate the performance of a store trial which was performed in stores 77, 86, and 88. The first step is to aggregate purchases by customer and total sales at each store by month so that we can compare store performance by month and find a suitable control group to measure the trial group against.</p>
<div class="cell">
<div class="cell-output-display">
<div id="dfubxjkper" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#dfubxjkper table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#dfubxjkper thead, #dfubxjkper tbody, #dfubxjkper tfoot, #dfubxjkper tr, #dfubxjkper td, #dfubxjkper th {
  border-style: none;
}

#dfubxjkper p {
  margin: 0;
  padding: 0;
}

#dfubxjkper .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#dfubxjkper .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#dfubxjkper .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#dfubxjkper .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#dfubxjkper .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#dfubxjkper .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#dfubxjkper .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#dfubxjkper .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#dfubxjkper .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#dfubxjkper .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#dfubxjkper .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#dfubxjkper .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#dfubxjkper .gt_spanner_row {
  border-bottom-style: hidden;
}

#dfubxjkper .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#dfubxjkper .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#dfubxjkper .gt_from_md > :first-child {
  margin-top: 0;
}

#dfubxjkper .gt_from_md > :last-child {
  margin-bottom: 0;
}

#dfubxjkper .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#dfubxjkper .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#dfubxjkper .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#dfubxjkper .gt_row_group_first td {
  border-top-width: 2px;
}

#dfubxjkper .gt_row_group_first th {
  border-top-width: 2px;
}

#dfubxjkper .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#dfubxjkper .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#dfubxjkper .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#dfubxjkper .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#dfubxjkper .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#dfubxjkper .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#dfubxjkper .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#dfubxjkper .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#dfubxjkper .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#dfubxjkper .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#dfubxjkper .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#dfubxjkper .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#dfubxjkper .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#dfubxjkper .gt_left {
  text-align: left;
}

#dfubxjkper .gt_center {
  text-align: center;
}

#dfubxjkper .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#dfubxjkper .gt_font_normal {
  font-weight: normal;
}

#dfubxjkper .gt_font_bold {
  font-weight: bold;
}

#dfubxjkper .gt_font_italic {
  font-style: italic;
}

#dfubxjkper .gt_super {
  font-size: 65%;
}

#dfubxjkper .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#dfubxjkper .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#dfubxjkper .gt_indent_1 {
  text-indent: 5px;
}

#dfubxjkper .gt_indent_2 {
  text-indent: 10px;
}

#dfubxjkper .gt_indent_3 {
  text-indent: 15px;
}

#dfubxjkper .gt_indent_4 {
  text-indent: 20px;
}

#dfubxjkper .gt_indent_5 {
  text-indent: 25px;
}

#dfubxjkper .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#dfubxjkper div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_col_headings">
<th id="year" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">year</th>
<th id="month" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">month</th>
<th id="store_nbr" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">store_nbr</th>
<th id="date" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">date</th>
<th id="prod_qty_sum" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">prod_qty_sum</th>
<th id="prod_qty_avg" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">prod_qty_avg</th>
<th id="tot_sales_sum" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">tot_sales_sum</th>
<th id="tot_sales_avg" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">tot_sales_avg</th>
<th id="pack_size_sum" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">pack_size_sum</th>
<th id="pack_size_avg" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">pack_size_avg</th>
<th id="transx_sum" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">transx_sum</th>
<th id="transx_avg" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">transx_avg</th>
<th id="cust_nbr" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">cust_nbr</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_right" headers="year">2018</td>
<td class="gt_row gt_right" headers="month">7</td>
<td class="gt_row gt_center" headers="store_nbr">1</td>
<td class="gt_row gt_right" headers="date">2018-07-01</td>
<td class="gt_row gt_right" headers="prod_qty_sum">59</td>
<td class="gt_row gt_right" headers="prod_qty_avg">1.229167</td>
<td class="gt_row gt_right" headers="tot_sales_sum">191.6</td>
<td class="gt_row gt_right" headers="tot_sales_avg">3.991667</td>
<td class="gt_row gt_right" headers="pack_size_sum">8513</td>
<td class="gt_row gt_right" headers="pack_size_avg">177.3542</td>
<td class="gt_row gt_right" headers="transx_sum">50</td>
<td class="gt_row gt_right" headers="transx_avg">1.041667</td>
<td class="gt_row gt_right" headers="cust_nbr">48</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="year">2018</td>
<td class="gt_row gt_right" headers="month">7</td>
<td class="gt_row gt_center" headers="store_nbr">2</td>
<td class="gt_row gt_right" headers="date">2018-07-01</td>
<td class="gt_row gt_right" headers="prod_qty_sum">45</td>
<td class="gt_row gt_right" headers="prod_qty_avg">1.184211</td>
<td class="gt_row gt_right" headers="tot_sales_sum">145.7</td>
<td class="gt_row gt_right" headers="tot_sales_avg">3.834211</td>
<td class="gt_row gt_right" headers="pack_size_sum">7217</td>
<td class="gt_row gt_right" headers="pack_size_avg">189.9211</td>
<td class="gt_row gt_right" headers="transx_sum">40</td>
<td class="gt_row gt_right" headers="transx_avg">1.052632</td>
<td class="gt_row gt_right" headers="cust_nbr">38</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="year">2018</td>
<td class="gt_row gt_right" headers="month">7</td>
<td class="gt_row gt_center" headers="store_nbr">3</td>
<td class="gt_row gt_right" headers="date">2018-07-01</td>
<td class="gt_row gt_right" headers="prod_qty_sum">263</td>
<td class="gt_row gt_right" headers="prod_qty_avg">2.435185</td>
<td class="gt_row gt_right" headers="tot_sales_sum">1164.9</td>
<td class="gt_row gt_right" headers="tot_sales_avg">10.786111</td>
<td class="gt_row gt_right" headers="pack_size_sum">23838</td>
<td class="gt_row gt_right" headers="pack_size_avg">220.7222</td>
<td class="gt_row gt_right" headers="transx_sum">134</td>
<td class="gt_row gt_right" headers="transx_avg">1.240741</td>
<td class="gt_row gt_right" headers="cust_nbr">108</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="year">2018</td>
<td class="gt_row gt_right" headers="month">7</td>
<td class="gt_row gt_center" headers="store_nbr">4</td>
<td class="gt_row gt_right" headers="date">2018-07-01</td>
<td class="gt_row gt_right" headers="prod_qty_sum">302</td>
<td class="gt_row gt_right" headers="prod_qty_avg">2.495868</td>
<td class="gt_row gt_right" headers="tot_sales_sum">1318.3</td>
<td class="gt_row gt_right" headers="tot_sales_avg">10.895041</td>
<td class="gt_row gt_right" headers="pack_size_sum">28020</td>
<td class="gt_row gt_right" headers="pack_size_avg">231.5702</td>
<td class="gt_row gt_right" headers="transx_sum">152</td>
<td class="gt_row gt_right" headers="transx_avg">1.256198</td>
<td class="gt_row gt_right" headers="cust_nbr">121</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="year">2018</td>
<td class="gt_row gt_right" headers="month">7</td>
<td class="gt_row gt_center" headers="store_nbr">5</td>
<td class="gt_row gt_right" headers="date">2018-07-01</td>
<td class="gt_row gt_right" headers="prod_qty_sum">236</td>
<td class="gt_row gt_right" headers="prod_qty_avg">2.593407</td>
<td class="gt_row gt_right" headers="tot_sales_sum">791.6</td>
<td class="gt_row gt_right" headers="tot_sales_avg">8.698901</td>
<td class="gt_row gt_right" headers="pack_size_sum">20236</td>
<td class="gt_row gt_right" headers="pack_size_avg">222.3736</td>
<td class="gt_row gt_right" headers="transx_sum">118</td>
<td class="gt_row gt_right" headers="transx_avg">1.296703</td>
<td class="gt_row gt_right" headers="cust_nbr">91</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="year">2018</td>
<td class="gt_row gt_right" headers="month">7</td>
<td class="gt_row gt_center" headers="store_nbr">6</td>
<td class="gt_row gt_right" headers="date">2018-07-01</td>
<td class="gt_row gt_right" headers="prod_qty_sum">71</td>
<td class="gt_row gt_right" headers="prod_qty_avg">1.510638</td>
<td class="gt_row gt_right" headers="tot_sales_sum">249.8</td>
<td class="gt_row gt_right" headers="tot_sales_avg">5.314894</td>
<td class="gt_row gt_right" headers="pack_size_sum">8398</td>
<td class="gt_row gt_right" headers="pack_size_avg">178.6809</td>
<td class="gt_row gt_right" headers="transx_sum">50</td>
<td class="gt_row gt_right" headers="transx_avg">1.063830</td>
<td class="gt_row gt_right" headers="cust_nbr">47</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Next we will visualize stores 77, 86, and 88 in order to get an idea of what their sales pattern looks like over the period data is available.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="quantium_task2_files/figure-html/linechart-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Based on the graph, store 77 seems to be a smaller store, store 86 seems to be mid-sized and store 88 is a large, top performing store. Control stores to compare to each trial store need to match the category of the trial store. Store 88 will likely have fewer candidates for matches since it is a bit of an outlier store. In order to calculate similarity, we can first expand the store numbers to a grid of each store id paired with every other store id, then run a function to calculate the similarity between each pairing. This analysis uses pearson’s correlation function and a normalized euclidean distance formula to calculate similarity. Each function makes up half the weight of a final scoring so that the top scoring store will be the most correlated and the closest size in terms of total sales during the pre-trial period. The table below shows the top 4 candidates for each trial store but only the top scoring store carries forward in further analysis. The graph shows the trial and control stores during the Pre-trial, Trial, and Post-trial periods</p>
<div class="cell">
<div class="cell-output-display">
<div id="mjdsqriofe" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#mjdsqriofe table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#mjdsqriofe thead, #mjdsqriofe tbody, #mjdsqriofe tfoot, #mjdsqriofe tr, #mjdsqriofe td, #mjdsqriofe th {
  border-style: none;
}

#mjdsqriofe p {
  margin: 0;
  padding: 0;
}

#mjdsqriofe .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#mjdsqriofe .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#mjdsqriofe .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#mjdsqriofe .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#mjdsqriofe .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#mjdsqriofe .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mjdsqriofe .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#mjdsqriofe .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#mjdsqriofe .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#mjdsqriofe .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#mjdsqriofe .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#mjdsqriofe .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#mjdsqriofe .gt_spanner_row {
  border-bottom-style: hidden;
}

#mjdsqriofe .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#mjdsqriofe .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#mjdsqriofe .gt_from_md > :first-child {
  margin-top: 0;
}

#mjdsqriofe .gt_from_md > :last-child {
  margin-bottom: 0;
}

#mjdsqriofe .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#mjdsqriofe .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#mjdsqriofe .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#mjdsqriofe .gt_row_group_first td {
  border-top-width: 2px;
}

#mjdsqriofe .gt_row_group_first th {
  border-top-width: 2px;
}

#mjdsqriofe .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#mjdsqriofe .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#mjdsqriofe .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#mjdsqriofe .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mjdsqriofe .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#mjdsqriofe .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#mjdsqriofe .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#mjdsqriofe .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#mjdsqriofe .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mjdsqriofe .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#mjdsqriofe .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#mjdsqriofe .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#mjdsqriofe .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#mjdsqriofe .gt_left {
  text-align: left;
}

#mjdsqriofe .gt_center {
  text-align: center;
}

#mjdsqriofe .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#mjdsqriofe .gt_font_normal {
  font-weight: normal;
}

#mjdsqriofe .gt_font_bold {
  font-weight: bold;
}

#mjdsqriofe .gt_font_italic {
  font-style: italic;
}

#mjdsqriofe .gt_super {
  font-size: 65%;
}

#mjdsqriofe .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#mjdsqriofe .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#mjdsqriofe .gt_indent_1 {
  text-indent: 5px;
}

#mjdsqriofe .gt_indent_2 {
  text-indent: 10px;
}

#mjdsqriofe .gt_indent_3 {
  text-indent: 15px;
}

#mjdsqriofe .gt_indent_4 {
  text-indent: 20px;
}

#mjdsqriofe .gt_indent_5 {
  text-indent: 25px;
}

#mjdsqriofe .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#mjdsqriofe div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<caption>Top four stores similar to each trial store</caption>
<thead>
<tr class="header gt_col_headings">
<th id="nbr2" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">stores</th>
<th id="correlations" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">correlations</th>
<th id="magnitude_distance" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">magnitude_distance</th>
<th id="score" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">score</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd gt_group_heading_row">
<td colspan="4" id="77" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">77</td>
</tr>
<tr class="even gt_row_group_first">
<td class="gt_row gt_right" headers="77  nbr2">233</td>
<td class="gt_row gt_right" headers="77  correlations">0.9741068</td>
<td class="gt_row gt_right" headers="77  magnitude_distance">1.0000000</td>
<td class="gt_row gt_right" headers="77  score">0.9870534</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="77  nbr2">50</td>
<td class="gt_row gt_right" headers="77  correlations">0.8903059</td>
<td class="gt_row gt_right" headers="77  magnitude_distance">0.9905754</td>
<td class="gt_row gt_right" headers="77  score">0.9404407</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="77  nbr2">41</td>
<td class="gt_row gt_right" headers="77  correlations">0.9001067</td>
<td class="gt_row gt_right" headers="77  magnitude_distance">0.9781417</td>
<td class="gt_row gt_right" headers="77  score">0.9391242</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="77  nbr2">115</td>
<td class="gt_row gt_right" headers="77  correlations">0.7401944</td>
<td class="gt_row gt_right" headers="77  magnitude_distance">0.9484118</td>
<td class="gt_row gt_right" headers="77  score">0.8443031</td>
</tr>
<tr class="even gt_group_heading_row">
<td colspan="4" id="86" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">86</td>
</tr>
<tr class="odd gt_row_group_first">
<td class="gt_row gt_right" headers="86  nbr2">138</td>
<td class="gt_row gt_right" headers="86  correlations">0.8561609</td>
<td class="gt_row gt_right" headers="86  magnitude_distance">0.9781641</td>
<td class="gt_row gt_right" headers="86  score">0.9171625</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="86  nbr2">155</td>
<td class="gt_row gt_right" headers="86  correlations">0.8529851</td>
<td class="gt_row gt_right" headers="86  magnitude_distance">0.9805851</td>
<td class="gt_row gt_right" headers="86  score">0.9167851</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="86  nbr2">222</td>
<td class="gt_row gt_right" headers="86  correlations">0.7950692</td>
<td class="gt_row gt_right" headers="86  magnitude_distance">0.9787966</td>
<td class="gt_row gt_right" headers="86  score">0.8869329</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="86  nbr2">269</td>
<td class="gt_row gt_right" headers="86  correlations">0.7961014</td>
<td class="gt_row gt_right" headers="86  magnitude_distance">0.9509362</td>
<td class="gt_row gt_right" headers="86  score">0.8735188</td>
</tr>
<tr class="odd gt_group_heading_row">
<td colspan="4" id="88" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">88</td>
</tr>
<tr class="even gt_row_group_first">
<td class="gt_row gt_right" headers="88  nbr2">91</td>
<td class="gt_row gt_right" headers="88  correlations">0.9119856</td>
<td class="gt_row gt_right" headers="88  magnitude_distance">0.6667075</td>
<td class="gt_row gt_right" headers="88  score">0.7893465</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="88  nbr2">79</td>
<td class="gt_row gt_right" headers="88  correlations">0.7719891</td>
<td class="gt_row gt_right" headers="88  magnitude_distance">0.7656028</td>
<td class="gt_row gt_right" headers="88  score">0.7687959</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="88  nbr2">7</td>
<td class="gt_row gt_right" headers="88  correlations">0.6988456</td>
<td class="gt_row gt_right" headers="88  magnitude_distance">0.7930609</td>
<td class="gt_row gt_right" headers="88  score">0.7459533</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="88  nbr2">225</td>
<td class="gt_row gt_right" headers="88  correlations">0.7430937</td>
<td class="gt_row gt_right" headers="88  magnitude_distance">0.6609805</td>
<td class="gt_row gt_right" headers="88  score">0.7020371</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="quantium_task2_files/figure-html/filter_comps-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The results table below shows store sales metrics from the pre-trial period before February 2019, the trial period from February to the end of April, and the post-trial period from May onward.</p>
<div class="cell">
<div class="cell-output-display">
<div id="kjrwwjflqo" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#kjrwwjflqo table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#kjrwwjflqo thead, #kjrwwjflqo tbody, #kjrwwjflqo tfoot, #kjrwwjflqo tr, #kjrwwjflqo td, #kjrwwjflqo th {
  border-style: none;
}

#kjrwwjflqo p {
  margin: 0;
  padding: 0;
}

#kjrwwjflqo .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#kjrwwjflqo .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#kjrwwjflqo .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#kjrwwjflqo .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#kjrwwjflqo .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#kjrwwjflqo .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#kjrwwjflqo .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#kjrwwjflqo .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#kjrwwjflqo .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#kjrwwjflqo .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#kjrwwjflqo .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#kjrwwjflqo .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#kjrwwjflqo .gt_spanner_row {
  border-bottom-style: hidden;
}

#kjrwwjflqo .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#kjrwwjflqo .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#kjrwwjflqo .gt_from_md > :first-child {
  margin-top: 0;
}

#kjrwwjflqo .gt_from_md > :last-child {
  margin-bottom: 0;
}

#kjrwwjflqo .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#kjrwwjflqo .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#kjrwwjflqo .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#kjrwwjflqo .gt_row_group_first td {
  border-top-width: 2px;
}

#kjrwwjflqo .gt_row_group_first th {
  border-top-width: 2px;
}

#kjrwwjflqo .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#kjrwwjflqo .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#kjrwwjflqo .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#kjrwwjflqo .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#kjrwwjflqo .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#kjrwwjflqo .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#kjrwwjflqo .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#kjrwwjflqo .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#kjrwwjflqo .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#kjrwwjflqo .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#kjrwwjflqo .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#kjrwwjflqo .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#kjrwwjflqo .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#kjrwwjflqo .gt_left {
  text-align: left;
}

#kjrwwjflqo .gt_center {
  text-align: center;
}

#kjrwwjflqo .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#kjrwwjflqo .gt_font_normal {
  font-weight: normal;
}

#kjrwwjflqo .gt_font_bold {
  font-weight: bold;
}

#kjrwwjflqo .gt_font_italic {
  font-style: italic;
}

#kjrwwjflqo .gt_super {
  font-size: 65%;
}

#kjrwwjflqo .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#kjrwwjflqo .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#kjrwwjflqo .gt_indent_1 {
  text-indent: 5px;
}

#kjrwwjflqo .gt_indent_2 {
  text-indent: 10px;
}

#kjrwwjflqo .gt_indent_3 {
  text-indent: 15px;
}

#kjrwwjflqo .gt_indent_4 {
  text-indent: 20px;
}

#kjrwwjflqo .gt_indent_5 {
  text-indent: 25px;
}

#kjrwwjflqo .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#kjrwwjflqo div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<caption>Monthly store sales metrics for trial and control stores</caption>
<thead>
<tr class="header gt_col_headings">
<th id="variable" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col"></th>
<th id="pre_trial" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Pre-trial</th>
<th id="trial" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Trial</th>
<th id="pct_delta" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Percent change</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd gt_group_heading_row">
<td colspan="4" id="Trial store 77" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">Trial store 77</td>
</tr>
<tr class="even gt_row_group_first">
<td class="gt_row gt_left" headers="Trial store 77  variable">product quantity per customer</td>
<td class="gt_row gt_right" headers="Trial store 77  pre_trial">1.61</td>
<td class="gt_row gt_right" headers="Trial store 77  trial">1.65</td>
<td class="gt_row gt_left" headers="Trial store 77  pct_delta">+0.02%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Trial store 77  variable">total sales</td>
<td class="gt_row gt_right" headers="Trial store 77  pre_trial">235.43</td>
<td class="gt_row gt_right" headers="Trial store 77  trial">248.80</td>
<td class="gt_row gt_left" headers="Trial store 77  pct_delta">+0.06%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Trial store 77  variable">number of transactions per customer</td>
<td class="gt_row gt_right" headers="Trial store 77  pre_trial">1.06</td>
<td class="gt_row gt_right" headers="Trial store 77  trial">1.04</td>
<td class="gt_row gt_left" headers="Trial store 77  pct_delta">−0.02%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Trial store 77  variable">number of customers</td>
<td class="gt_row gt_right" headers="Trial store 77  pre_trial">42.00</td>
<td class="gt_row gt_right" headers="Trial store 77  trial">46.00</td>
<td class="gt_row gt_left" headers="Trial store 77  pct_delta">+0.10%</td>
</tr>
<tr class="even gt_group_heading_row">
<td colspan="4" id="Trial store 86" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">Trial store 86</td>
</tr>
<tr class="odd gt_row_group_first">
<td class="gt_row gt_left" headers="Trial store 86  variable">product quantity per customer</td>
<td class="gt_row gt_right" headers="Trial store 86  pre_trial">2.50</td>
<td class="gt_row gt_right" headers="Trial store 86  trial">2.47</td>
<td class="gt_row gt_left" headers="Trial store 86  pct_delta">−0.01%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Trial store 86  variable">total sales</td>
<td class="gt_row gt_right" headers="Trial store 86  pre_trial">849.49</td>
<td class="gt_row gt_right" headers="Trial store 86  trial">909.00</td>
<td class="gt_row gt_left" headers="Trial store 86  pct_delta">+0.07%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Trial store 86  variable">number of transactions per customer</td>
<td class="gt_row gt_right" headers="Trial store 86  pre_trial">1.26</td>
<td class="gt_row gt_right" headers="Trial store 86  trial">1.24</td>
<td class="gt_row gt_left" headers="Trial store 86  pct_delta">−0.02%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Trial store 86  variable">number of customers</td>
<td class="gt_row gt_right" headers="Trial store 86  pre_trial">98.14</td>
<td class="gt_row gt_right" headers="Trial store 86  trial">108.33</td>
<td class="gt_row gt_left" headers="Trial store 86  pct_delta">+0.10%</td>
</tr>
<tr class="odd gt_group_heading_row">
<td colspan="4" id="Trial store 88" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">Trial store 88</td>
</tr>
<tr class="even gt_row_group_first">
<td class="gt_row gt_left" headers="Trial store 88  variable">product quantity per customer</td>
<td class="gt_row gt_right" headers="Trial store 88  pre_trial">2.41</td>
<td class="gt_row gt_right" headers="Trial store 88  trial">2.51</td>
<td class="gt_row gt_left" headers="Trial store 88  pct_delta">+0.04%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Trial store 88  variable">total sales</td>
<td class="gt_row gt_right" headers="Trial store 88  pre_trial">1 261.83</td>
<td class="gt_row gt_right" headers="Trial store 88  trial">1 374.53</td>
<td class="gt_row gt_left" headers="Trial store 88  pct_delta">+0.09%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Trial store 88  variable">number of transactions per customer</td>
<td class="gt_row gt_right" headers="Trial store 88  pre_trial">1.21</td>
<td class="gt_row gt_right" headers="Trial store 88  trial">1.26</td>
<td class="gt_row gt_left" headers="Trial store 88  pct_delta">+0.04%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Trial store 88  variable">number of customers</td>
<td class="gt_row gt_right" headers="Trial store 88  pre_trial">121.14</td>
<td class="gt_row gt_right" headers="Trial store 88  trial">124.67</td>
<td class="gt_row gt_left" headers="Trial store 88  pct_delta">+0.03%</td>
</tr>
<tr class="even gt_group_heading_row">
<td colspan="4" id="Control store 91" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">Control store 91</td>
</tr>
<tr class="odd gt_row_group_first">
<td class="gt_row gt_left" headers="Control store 91  variable">product quantity per customer</td>
<td class="gt_row gt_right" headers="Control store 91  pre_trial">2.18</td>
<td class="gt_row gt_right" headers="Control store 91  trial">2.26</td>
<td class="gt_row gt_left" headers="Control store 91  pct_delta">+0.03%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Control store 91  variable">total sales</td>
<td class="gt_row gt_right" headers="Control store 91  pre_trial">829.53</td>
<td class="gt_row gt_right" headers="Control store 91  trial">832.17</td>
<td class="gt_row gt_left" headers="Control store 91  pct_delta">0.00%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Control store 91  variable">number of transactions per customer</td>
<td class="gt_row gt_right" headers="Control store 91  pre_trial">1.14</td>
<td class="gt_row gt_right" headers="Control store 91  trial">1.16</td>
<td class="gt_row gt_left" headers="Control store 91  pct_delta">+0.02%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Control store 91  variable">number of customers</td>
<td class="gt_row gt_right" headers="Control store 91  pre_trial">86.43</td>
<td class="gt_row gt_right" headers="Control store 91  trial">83.00</td>
<td class="gt_row gt_left" headers="Control store 91  pct_delta">−0.04%</td>
</tr>
<tr class="odd gt_group_heading_row">
<td colspan="4" id="Control store 138" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">Control store 138</td>
</tr>
<tr class="even gt_row_group_first">
<td class="gt_row gt_left" headers="Control store 138  variable">product quantity per customer</td>
<td class="gt_row gt_right" headers="Control store 138  pre_trial">2.51</td>
<td class="gt_row gt_right" headers="Control store 138  trial">2.48</td>
<td class="gt_row gt_left" headers="Control store 138  pct_delta">−0.02%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Control store 138  variable">total sales</td>
<td class="gt_row gt_right" headers="Control store 138  pre_trial">858.84</td>
<td class="gt_row gt_right" headers="Control store 138  trial">807.13</td>
<td class="gt_row gt_left" headers="Control store 138  pct_delta">−0.06%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Control store 138  variable">number of transactions per customer</td>
<td class="gt_row gt_right" headers="Control store 138  pre_trial">1.26</td>
<td class="gt_row gt_right" headers="Control store 138  trial">1.24</td>
<td class="gt_row gt_left" headers="Control store 138  pct_delta">−0.02%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Control store 138  variable">number of customers</td>
<td class="gt_row gt_right" headers="Control store 138  pre_trial">100.29</td>
<td class="gt_row gt_right" headers="Control store 138  trial">99.00</td>
<td class="gt_row gt_left" headers="Control store 138  pct_delta">−0.01%</td>
</tr>
<tr class="even gt_group_heading_row">
<td colspan="4" id="Control store 233" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">Control store 233</td>
</tr>
<tr class="odd gt_row_group_first">
<td class="gt_row gt_left" headers="Control store 233  variable">product quantity per customer</td>
<td class="gt_row gt_right" headers="Control store 233  pre_trial">1.58</td>
<td class="gt_row gt_right" headers="Control store 233  trial">1.53</td>
<td class="gt_row gt_left" headers="Control store 233  pct_delta">−0.03%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Control store 233  variable">total sales</td>
<td class="gt_row gt_right" headers="Control store 233  pre_trial">226.19</td>
<td class="gt_row gt_right" headers="Control store 233  trial">192.07</td>
<td class="gt_row gt_left" headers="Control store 233  pct_delta">−0.15%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Control store 233  variable">number of transactions per customer</td>
<td class="gt_row gt_right" headers="Control store 233  pre_trial">1.03</td>
<td class="gt_row gt_right" headers="Control store 233  trial">1.06</td>
<td class="gt_row gt_left" headers="Control store 233  pct_delta">+0.02%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Control store 233  variable">number of customers</td>
<td class="gt_row gt_right" headers="Control store 233  pre_trial">41.43</td>
<td class="gt_row gt_right" headers="Control store 233  trial">37.00</td>
<td class="gt_row gt_left" headers="Control store 233  pct_delta">−0.11%</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>After a visual analysis of the results table it is clear that average monthly number of customers increases consistently in the trial groups and decreases consistently in the control groups. Since most other indicators stay mostly flat, increased customer numbers drives an increase in total sales in the trial stores while total sales fall in the control stores. Further statistical analysis would be needed to determine the statistical significance of the increase in total sales.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>